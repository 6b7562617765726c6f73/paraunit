#!/usr/bin/env php
<?php

define('PARAUNIT_PHAR_FILE', __FILE__);

if (isset($argv[1]) && $argv[1] === 'phpunit') {
    // Do not run Paraunit itself, actually run the embedded PHPUnit
    array_shift($argv);
    $phpunitPhar = str_replace(
        array(DIRECTORY_SEPARATOR, 'src/Paraunit/Bin/phar'),
        array('/',                 'vendor/phpunit/phpunit/phpunit'),
        __FILE__
    );

    define('__PHPUNIT_PHAR__', $phpunitPhar);
    define('__PHPUNIT_PHAR_ROOT__', 'phar://paraunit.phar');

    return require __PHPUNIT_PHAR__;
}

require './paraunit';
